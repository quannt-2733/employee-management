<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Employee List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">

<h2>Employee Management System</h2>

<div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
    <strong>Success!</strong> <span th:text="${successMessage}"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

<div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
    <strong>Error!</strong> <span th:text="${errorMessage}"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

<a th:href="@{/employees/add}" class="btn btn-primary mb-3">Add New Employee</a>

<form th:action="@{/employees}" method="get" class="card card-body mb-3">
    <div class="row">
        <div class="col-md-5">
            <label for="name" class="form-label">Name</label>
            <input type="text" id="name" name="name" th:value="${searchName}" class="form-control" />
        </div>
        <div class="col-md-5">
            <label for="departmentId" class="form-label">Department</label>
            <select id="departmentId" name="departmentId" class="form-select">
                <option value="">-- All Departments --</option>
                <option th:each="dept : ${departments}"
                        th:value="${dept.id}"
                        th:text="${dept.name}"
                        th:selected="${dept.id == searchDeptId}"></option>
            </select>
        </div>
        <div class="col-md-2 d-flex align-items-end">
            <button type="submit" class="btn btn-info w-100">Search</button>
        </div>
    </div>
</form>

<table class="table table-striped table-bordered">
    <thead class="table-dark">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Department</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="emp : ${employees}">
        <td th:text="${emp.id}">1</td>
        <td th:text="${emp.name}">John Doe</td>
        <td th:text="${emp.email}">john@example.com</td>
        <td th:text="${emp.department?.name}">IT</td>
    </tr>
    </tbody>
</table>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
